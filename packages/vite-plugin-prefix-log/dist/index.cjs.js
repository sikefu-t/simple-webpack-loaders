const{parse:y}=require("@babel/parser"),b=require("@babel/traverse").default,L=require("@babel/generator").default,r=require("@babel/types"),S=require("@babel/core"),a={success:"background-color: #f0f9eb;border: 1px solid #c2e7b0;padding: 0px 5px;color: #67c23a;font-size: 14px;",info:"background-color: #f4f4f5;border: 1px solid #d3d4d6;padding: 0px 5px;color: #909399;font-size: 14px;",warning:"background-color: #fdf6ec;border: 1px solid #f5dab1;padding: 0px 5px;color: #e6a23c;font-size: 14px;",danger:"background-color: #fef0f0;border: 1px solid #fbc4c4;padding: 0px 5px;color: #f56c6c;font-size: 14px;"};function $(e={}){return{name:"vite-plugin-prefix-log",transform(t,g){if(!g.endsWith(".js"))return null;const o={type:a[e.type]||a.info,textWrap:e.textWrap||!1,customStyle:e.customStyle||null};let u=y(t,{sourceType:"module",plugins:["dynamicImport"]});b(u,{CallExpression(n){if(q(n.node)){const s=L(n.node).code;let l=null,i=null,c=null;if(n.node.arguments.length>1&&n.node.arguments.at(-1).type==="StringLiteral"&&["success","info","warning","danger"].includes(n.node.arguments.at(-1).value)&&(c=n.node.arguments.at(-1).value),c){n.node.arguments.pop(),i=r.stringLiteral(`${a[c]}`);const x=s.lastIndexOf(",");l=f(s.slice(12,x))}else i=o.customStyle?r.stringLiteral(`${o.customStyle}`):r.stringLiteral(`${o.type}`),l=f(s.slice(12,-1));d(i,n.node.arguments);const m=o.textWrap?r.stringLiteral(`%c${l}
`):r.stringLiteral(`%c${l}`);d(m,n.node.arguments)}}});const{code:p}=S.transformFromAstSync(u,t,{configFile:!1});return{code:p,map:null}}}}function q(e){return r.isMemberExpression(e.callee)&&r.isIdentifier(e.callee.object,{name:"console"})&&r.isIdentifier(e.callee.property,{name:"log"})}function d(e,t){t.unshift(e)}function f(e){return e.replace(/^['"]+|['"]+$/g,"")}module.exports=$;
